<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="kid.css">
</head>
<body>

    <div class="upper-wrap my-5" >
        <div class="wrapIt">
            <i id="left" class="fa fa-angle-left"></i>
            <ul class="myCarousel">
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/i34mlgU3WWNppU7la0O4QSAXJ6AeO4k3MmJC3FvWw8-Uo8BLBCURd3r5WnaNkVeRlQ=s512-rw" alt="img" draggable="false"></div>
                    <span>Sago Mini World: Kids</span>
                    <span>Games</span>
                    <span>4.1</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/OjVR_Q_388NBEf8kepwVgzv83R58fwoW6shWoQf_4pbtVvUNglko52zoB0Wl8_-QA-sy=s512-rw" alt="img" draggable="false"></div>
                    <h2>Glow Doodle Art - Color & Draw</h2>
                    <span>4.1</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/oqSE2l3XcbiBXKrdj_2ChXgUb-rjN0E48O9FxedujZajwvFfGjYFqPDjpUJnLVuIKw=s512-rw" alt="img" draggable="false"></div>
                    <h2>Little Panda's Fast Food Cook</h2>
                    <span>3.0</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/7DmntRheFT48goTi2qIwSo2PITA9Kf_-cL5n9TolAbwIk0N-W3xpgonvvGHQKVDjJg=s512-rw" alt="img" draggable="false"></div>
                    <h2>Timpy Pizza Kids Cooking Games</h2>
                    <span>4.2</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/ZFOuz_KlLu9nInxBTRzTYhtYL1tGFGRjTbxrE82LO2scIRyFdwOSRAU7s4T-YTRnrkI=s512-rw" alt="img" draggable="false"></div>
                    <h2>Little Panda's Car Kingdom</h2>
                    <span>4.2</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="https://play-lh.googleusercontent.com/_VC9Ua1XSaNyDVx0f-jP8t0vX7JayxAxANTpXvBQJnGfXUAXTCMCqTxvyus-pKQJ6cA=s512-rw" alt="img" draggable="false"></div>
                    <h2>Cooking Games for Kids & Girls</h2>
                    <span>3.6</span>
                </li>
            </ul>
            <i id="right" class="fa fa-angle-right"></i>
        </div>
    </div>

    <script>
        const wrapIt = document.querySelector(".wrapIt");
        const myCarousel = document.querySelector(".myCarousel");
        const firstmyCardWidth = myCarousel.querySelector(".myCard").offsetWidth;
        const arrowBtns = document.querySelectorAll(".wrapIt i");
        const myCarouselChildrens = [...myCarousel.children];

        let isDragging = false, isAutoPlay = true, startX, startScrollLeft, timeoutId;

        // Get the number of myCards that can fit in the myCarousel at once
        let myCardPerView = Math.round(myCarousel.offsetWidth / firstmyCardWidth);

        // Insert copies of the last few myCards to beginning of myCarousel for infinite scrolling
        myCarouselChildrens.slice(-myCardPerView).reverse().forEach(myCard => {
            myCarousel.insertAdjacentHTML("afterbegin", myCard.outerHTML);
        });

        // Insert copies of the first few myCards to end of myCarousel for infinite scrolling
        myCarouselChildrens.slice(0, myCardPerView).forEach(myCard => {
            myCarousel.insertAdjacentHTML("beforeend", myCard.outerHTML);
        });

        // Scroll the myCarousel at appropriate postition to hide first few duplicate myCards on Firefox
        myCarousel.classList.add("no-transition");
        myCarousel.scrollLeft = myCarousel.offsetWidth;
        myCarousel.classList.remove("no-transition");

        // Add event listeners for the arrow buttons to scroll the myCarousel left and right
        arrowBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                myCarousel.scrollLeft += btn.id == "left" ? -firstmyCardWidth : firstmyCardWidth;
            });
        });

        const dragStart = (e) => {
            isDragging = true;
            myCarousel.classList.add("dragging");
            // Records the initial cursor and scroll position of the myCarousel
            startX = e.pageX;
            startScrollLeft = myCarousel.scrollLeft;
        }

        const dragging = (e) => {
            if (!isDragging) return; // if isDragging is false return from here
            // Updates the scroll position of the myCarousel based on the cursor movement
            myCarousel.scrollLeft = startScrollLeft - (e.pageX - startX);
        }

        const dragStop = () => {
            isDragging = false;
            myCarousel.classList.remove("dragging");
        }

        const infiniteScroll = () => {
            // If the myCarousel is at the beginning, scroll to the end
            if (myCarousel.scrollLeft === 0) {
                myCarousel.classList.add("no-transition");
                myCarousel.scrollLeft = myCarousel.scrollWidth - (2 * myCarousel.offsetWidth);
                myCarousel.classList.remove("no-transition");
            }
            // If the myCarousel is at the end, scroll to the beginning
            else if (Math.ceil(myCarousel.scrollLeft) === myCarousel.scrollWidth - myCarousel.offsetWidth) {
                myCarousel.classList.add("no-transition");
                myCarousel.scrollLeft = myCarousel.offsetWidth;
                myCarousel.classList.remove("no-transition");
            }

            // Clear existing timeout & start autoplay if mouse is not hovering over myCarousel
            clearTimeout(timeoutId);
            if (!wrapIt.matches(":hover")) autoPlay();
        }

        const autoPlay = () => {
            if (window.innerWidth < 800 || !isAutoPlay) return; // Return if window is smaller than 800 or isAutoPlay is false
            // Autoplay the myCarousel after every 2500 ms
            timeoutId = setTimeout(() => myCarousel.scrollLeft += firstmyCardWidth, 250000);
        }
        autoPlay();

        myCarousel.addEventListener("mousedown", dragStart);
        myCarousel.addEventListener("mousemove", dragging);
        document.addEventListener("mouseup", dragStop);
        myCarousel.addEventListener("scroll", infiniteScroll);
        wrapIt.addEventListener("mouseenter", () => clearTimeout(timeoutId));
        wrapIt.addEventListener("mouseleave", autoPlay);

    </script>

    
</body>
</html>