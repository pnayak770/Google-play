<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>
    <nav style="padding: 30px;">

    </nav>
    <section class="icon">
        <img src="images/newImageProject.png">
    </section>
    <section class="title">
        <h1 style="font-size: 2rem;font-weight: 300;">Teacher Approved apps & games</h1>
        <div class="age-groups">
            <button class="btn">All ages upto 12</button>
            <button class="btn">Ages upto 5</button>
            <button class="btn">Ages 6-8</button>
            <button class="btn">Ages 9-12</button>
        </div>
    </section>
    <section class="mecha-builders" style="margin-top:40px;">
        <div class="left-mecha-builders">
            <span class="now-avilable">
                <h2>Now avilable</h2>
            </span>
            <div class="mecha-builders-txt">
                <h1>Plan it,test it,solve it</h1>
                <h3>Save the day with Mecha Builders</h3>
            </div>
            <div class="bg-down">

                <div class="bg-down-img-text">
                    <img src="images/cartoon.webp">
                    <div class="bg-down-text" style="margin-left: 4px;">
                        <h3>Sesame Street Mecha Builders</h3>
                        <h3>Story Toys</h3>
                    </div>

                </div>
                <div class="bg-down-second">
                    <h5>Install</h5>
                    <p>In-app Purchases</p>
                </div>

            </div>



        </div>
        <div class="right-mecha-builders">
            <img src="images/B-g-img.webp">

        </div>

    </section>

    <div class="upper-wrap my-5" style="background-image: url(images/bgForTeam.jpg);">
        <div class="wrapIt">
            <i id="left" class="fa fa-angle-left"></i>
            <ul class="myCarousel">
                <li class="myCard">
                    <div class="img"><img src="images/carousel1.webp" alt="img" draggable="false"></div>
                    <span>Sago Mini World: Kids</span>
                    <span>Games</span>
                    <span>4.1</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="images/ashish1.jpg" alt="img" draggable="false"></div>
                    <h2>Ashish Kumar</h2>
                    <span>Software Developer</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="images/parneeth1.jpg" alt="img" draggable="false"></div>
                    <h2>Parneeth </h2>
                    <span>Software developer</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="images/sandeep1.jpg" alt="img" draggable="false"></div>
                    <h2>Sandeep</h2>
                    <span>Software developer</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="images/kapil.jpg" alt="img" draggable="false"></div>
                    <h2>Arjun</h2>
                    <span>Software developer</span>
                </li>
                <li class="myCard">
                    <div class="img"><img src="images/rahul.jpg" alt="img" draggable="false"></div>
                    <h2>Praveen</h2>
                    <span>Software developer</span>
                </li>
            </ul>
            <i id="right" class="fa fa-angle-right"></i>
        </div>
    </div>

    <script>
        const wrapIt = document.querySelector(".wrapIt");
        const myCarousel = document.querySelector(".myCarousel");
        const firstmyCardWidth = myCarousel.querySelector(".myCard").offsetWidth;
        const arrowBtns = document.querySelectorAll(".wrapIt i");
        const myCarouselChildrens = [...myCarousel.children];

        let isDragging = false, isAutoPlay = true, startX, startScrollLeft, timeoutId;

        // Get the number of myCards that can fit in the myCarousel at once
        let myCardPerView = Math.round(myCarousel.offsetWidth / firstmyCardWidth);

        // Insert copies of the last few myCards to beginning of myCarousel for infinite scrolling
        myCarouselChildrens.slice(-myCardPerView).reverse().forEach(myCard => {
            myCarousel.insertAdjacentHTML("afterbegin", myCard.outerHTML);
        });

        // Insert copies of the first few myCards to end of myCarousel for infinite scrolling
        myCarouselChildrens.slice(0, myCardPerView).forEach(myCard => {
            myCarousel.insertAdjacentHTML("beforeend", myCard.outerHTML);
        });

        // Scroll the myCarousel at appropriate postition to hide first few duplicate myCards on Firefox
        myCarousel.classList.add("no-transition");
        myCarousel.scrollLeft = myCarousel.offsetWidth;
        myCarousel.classList.remove("no-transition");

        // Add event listeners for the arrow buttons to scroll the myCarousel left and right
        arrowBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                myCarousel.scrollLeft += btn.id == "left" ? -firstmyCardWidth : firstmyCardWidth;
            });
        });

        const dragStart = (e) => {
            isDragging = true;
            myCarousel.classList.add("dragging");
            // Records the initial cursor and scroll position of the myCarousel
            startX = e.pageX;
            startScrollLeft = myCarousel.scrollLeft;
        }

        const dragging = (e) => {
            if (!isDragging) return; // if isDragging is false return from here
            // Updates the scroll position of the myCarousel based on the cursor movement
            myCarousel.scrollLeft = startScrollLeft - (e.pageX - startX);
        }

        const dragStop = () => {
            isDragging = false;
            myCarousel.classList.remove("dragging");
        }

        const infiniteScroll = () => {
            // If the myCarousel is at the beginning, scroll to the end
            if (myCarousel.scrollLeft === 0) {
                myCarousel.classList.add("no-transition");
                myCarousel.scrollLeft = myCarousel.scrollWidth - (2 * myCarousel.offsetWidth);
                myCarousel.classList.remove("no-transition");
            }
            // If the myCarousel is at the end, scroll to the beginning
            else if (Math.ceil(myCarousel.scrollLeft) === myCarousel.scrollWidth - myCarousel.offsetWidth) {
                myCarousel.classList.add("no-transition");
                myCarousel.scrollLeft = myCarousel.offsetWidth;
                myCarousel.classList.remove("no-transition");
            }

            // Clear existing timeout & start autoplay if mouse is not hovering over myCarousel
            clearTimeout(timeoutId);
            if (!wrapIt.matches(":hover")) autoPlay();
        }

        const autoPlay = () => {
            if (window.innerWidth < 800 || !isAutoPlay) return; // Return if window is smaller than 800 or isAutoPlay is false
            // Autoplay the myCarousel after every 2500 ms
            timeoutId = setTimeout(() => myCarousel.scrollLeft += firstmyCardWidth, 250000);
        }
        autoPlay();

        myCarousel.addEventListener("mousedown", dragStart);
        myCarousel.addEventListener("mousemove", dragging);
        document.addEventListener("mouseup", dragStop);
        myCarousel.addEventListener("scroll", infiniteScroll);
        wrapIt.addEventListener("mouseenter", () => clearTimeout(timeoutId));
        wrapIt.addEventListener("mouseleave", autoPlay);

    </script>

</body>

</html>